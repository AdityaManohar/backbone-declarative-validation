/*! backbone.declarative.validator - v0.1.0-dev - 4/5/2013
* https://github.com/AdityaManohar/backbone-declarative-validation
* Copyright (c) 2013 Aditya Manohar; Licensed MIT */
(function(Backbone,_){"use strict";var validator={patterns:{email:/^$|^\s*([(A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4})\s*$/i,number:/^$|^\s*(\d*(\.\d+)?)\s*$/,text:/^$|^(\s*([A-Za-z]+)\s*)+$/i},helpers:{type:function(e,r,s){return(""+e).replace(/^\s+|\s+$/g,""),s?s.test(e):this.patterns[r].test(e)},presence:function(e,r){return null===e||e===void 0?!1:!!e.replace(/^\s+|\s+$/g,"")===r},size:function(source,cond){var size,pattern=/^\s*(<|>|==|<=|>=|)\s*(\d*(?:\.\d+)?)\s*$/;return pattern.test(cond)?("number"!=typeof source&&isNaN(parseFloat(source))?"string"==typeof source&&(size=source.length):size=source,eval(size+cond)):!1}},validate:function(e){var r,s,t,i=this.validates,o=e;if(i){this.errors||(this.errors={});for(var n in i)if(i.hasOwnProperty(n)){this.errors[n]||(this.errors[n]={}),r=o[n],t=n.replace(/_/," "),s=i[n];for(var a in s)this.helpers[a]&&(this.helpers[a].call(this,r,s[a],s.using)?this.errors[n][a]&&delete this.errors[n][a]:this.errors[n][a]=s.msg||"Invalid "+t);_.isEmpty(this.errors[n])&&delete this.errors[n]}}return _.isEmpty(this.errors)?void 0:this.errors}};_.extend(Backbone.Model.prototype,validator)})(Backbone,_);